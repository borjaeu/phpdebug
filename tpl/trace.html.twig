{% extends 'bootstrap.html.twig' %}
{% block title %}Debug - Code Trace{% endblock %}
{% block style %}
    <style>
        div.column { width: 50%; float: left; }
        div.inner { overflow: auto;  border: 2px solid black; }
        pre.line { float: left; margin:0; width: 90%; overflow: hidden; padding: 0; border: none;}
        div.line { border-bottom: 1px solid lightblue; height: 18px; overflow: hidden; width: 5000px;}
            a.line_no { float: left; color:white; background-color: gray; font-weight: bold; padding: 1px; }

        .covered { background-color: #D4FFD4; }
        .follow { font-weight: bold; }
        .selected pre { background-color: #7FFF2A; }
        a { color: #000000; text-decoration: none; }
    </style>
{% endblock %}
{% block body %}
    <ol class="breadcrumb">
{% for info in navigation.breadcrumbs %}
        <li><a href="?trace={{ id }}&line={{ info.line }}" title="{{ info.call }}()">{{ info.name }}()</a></li>
    {% endfor %}
        <li class="active">...</li>
        <li><a href="?trace={{ id }}&line={{ navigation.next.line }}" title="{{ navigation.next.call }}()">{{ navigation.next.name }}()</a></li>
    </ol>
<div class="column">
    <div class="inner">
{% for line_no, line in trace_lines %}
        <div class="line{% if line_no == selected_trace %} selected{% endif %}">
            <a href="?trace={{ id }}&line={{ line_no }}" class="line_no">
                {{ "%03d" | format(line_no) }}
            </a>
            <a href="?trace={{ id }}&line={{ line_no }}" title="{{ line }}">
                <pre class="line">{{ line }}</pre>
            </a>
        </div>
{% endfor %}
    </div>
</div>
<div class="column">
    <div class="inner">
{% for line_no, line in code_lines %}
        <div class="line{% if line_no == line.selected %} selected{% endif %}{% if context[line_no] %} follow{% endif %}">
            <a href="codebrowser:{{ line.path }}" class="line_no">{{ "%03d" | format(line_no) }} </a>
{% if context[line_no] %}
            <a href="?trace={{ id }}&line={{ context[line_no] }}">
                <pre class="line{% if line_no == line.covered %} covered{% endif %}">{{ line.code }}</pre>
            </a>
{% else %}
            <pre class="line{% if line_no == line.covered %} covered{% endif %}">{{ line.code }}</pre>
{% endif %}
        </div>
{% endfor %}
    </div>
</div>
{% endblock %}